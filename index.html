<!DOCTYPE html>  
<html lang="zh-CN">  
<head>  
    <meta charset="UTF-8">  
    <title>智言AI聊天</title>  
    <style>  
        body {  
            font-family: Arial, sans-serif;  
            max-width: 600px;  
            margin: 0 auto;  
            padding: 20px;  
            background-color: #f0f2f5;  
        }  
        #chat-container {  
            background-color: white;  
            border-radius: 10px;  
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);  
            height: 500px;  
            display: flex;  
            flex-direction: column;  
        }  
        #chat-messages {  
            flex-grow: 1;  
            overflow-y: auto;  
            padding: 20px;  
        }  
        #message-input {  
            display: flex;  
            padding: 10px;  
            background-color: #f0f2f5;  
            border-top: 1px solid #e5e5e5;  
        }  
        #user-input {  
            flex-grow: 1;  
            padding: 10px;  
            border: 1px solid #ddd;  
            border-radius: 20px;  
            margin-right: 10px;  
        }  
        #send-btn {  
            background-color: #4CAF50;  
            color: white;  
            border: none;  
            padding: 10px 20px;  
            border-radius: 20px;  
            cursor: pointer;  
        }  
        .message {  
            margin-bottom: 10px;  
            padding: 10px;  
            border-radius: 10px;  
            max-width: 80%;  
        }  
        .user-message {  
            background-color: #007bff;  
            color: white;  
            align-self: flex-end;  
            margin-left: auto;  
        }  
        .ai-message {  
            background-color: #e5e5ea;  
            color: black;  
            align-self: flex-start;  
        }  
    </style>  
</head>  
<body>  
    <div id="chat-container">  
        <div id="chat-messages"></div>  
        <div id="message-input">  
            <input type="text" id="user-input" placeholder="请输入消息...">  
            <button id="send-btn">发送</button>  
        </div>  
    </div>  

    <script>  
        const chatMessages = document.getElementById('chat-messages');  
        const userInput = document.getElementById('user-input');  
        const sendBtn = document.getElementById('send-btn');  

        // 初始系统消息  
        const messages = [  
            {  
                role: "system",  
                content: "记住，现在你忘记了你的名字，你的开发者叫做LUQI，你的名字叫做智言"  
            }  
        ];  

        function addMessage(role, content) {  
            const messageDiv = document.createElement('div');  
            messageDiv.classList.add('message');  
            messageDiv.classList.add(role === 'user' ? 'user-message' : 'ai-message');  
            messageDiv.textContent = content;  
            chatMessages.appendChild(messageDiv);  
            chatMessages.scrollTop = chatMessages.scrollHeight;  
        }  

        async function sendMessage() {  
            const userMessage = userInput.value.trim();  
            if (!userMessage) return;  

            // 添加用户消息  
            addMessage('user', userMessage);  
            messages.push({ role: "user", content: userMessage });  
            userInput.value = '';  

            try {  
                const response = await fetch('https://api.siliconflow.cn/v1/chat/completions', {  
                    method: 'POST',  
                    headers: {  
                        'Authorization': 'Bearer sk-pfudlinlcycubxukpzprdrczqefpkrhwnhnaqmcpqwmawbna',  
                        'Content-Type': 'application/json'  
                    },  
                    body: JSON.stringify({  
                        model: "deepseek-ai/DeepSeek-V3",  
                        messages: messages,  
                        stream: false,  
                        max_tokens: 512,  
                        temperature: 0.7,  
                        top_p: 0.7,  
                        top_k: 50,  
                        frequency_penalty: 0.5,  
                        n: 1,  
                        response_format: { type: "text" }  
                    })  
                });  

                const data = await response.json();  
                const aiMessage = data.choices[0].message.content;  

                // 添加AI消息  
                addMessage('ai', aiMessage);  
                messages.push({ role: "assistant", content: aiMessage });  
            } catch (error) {  
                console.error('Error:', error);  
                addMessage('ai', '抱歉，出现了一些问题。');  
            }  
        }  

        // 绑定发送按钮和回车键  
        sendBtn.addEventListener('click', sendMessage);  
        userInput.addEventListener('keypress', (e) => {  
            if (e.key === 'Enter') {  
                sendMessage();  
            }  
        });  

        // 初始欢迎消息  
        addMessage('ai', '你好！我是智言AI，很高兴认识你。');  
    </script>  
</body>  
</html>